PORT ?= 8000

# Установить все зависимости и активировать виртуальное окружение
install:
    poetry install

# Запустить приложение
run: install
    poetry run flask --app example --debug run --port $(PORT)

# Остановить приложение
stop:
    @echo "Остановить приложение: используйте Ctrl+C в окне с запущенным сервером"

# Проверить код, тесты и линтинг
test:
    poetry run pytest --cov=hexlet_flask_example

lint:
    poetry run flake8

check: test lint

prod:
	poetry run gunicorn --workers 4 --bind 0.0.0.0:$(PORT) hello_world:app --log-file -